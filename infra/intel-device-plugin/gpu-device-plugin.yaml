apiVersion: deviceplugin.intel.com/v1
kind: GpuDevicePlugin
metadata:
  name: gpu-device-plugin
  namespace: kube-system
spec:
  # Настройка для разделения одного GPU между несколькими подами
  # shared-dev-num: количество подов, которые могут использовать один GPU одновременно
  # Для media transcode (Jellyfin, Immich) это подходит - они не критичны по времени
  sharedDevNum: 4  # Позволяет Jellyfin и Immich использовать один GPU одновременно
  tolerations:
    - key: "node.hardware.gpu"
      operator: "Equal"
      value: "intel-igpu"
      effect: "NoSchedule"
