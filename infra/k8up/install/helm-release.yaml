apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: k8up
  namespace: infra
spec:
  interval: 1h
  chart:
    spec:
      chart: k8up
      version: 4.8.6
      sourceRef:
        kind: HelmRepository
        name: k8up
        namespace: flux-system
  values:
    k8up:
      timezone: "Europe/Moscow"
      envVars:
        - name: BACKUP_GLOBAL_CONCURRENT_BACKUP_JOBS_LIMIT
          value: 3

    # RBAC
    rbac:
      create: true
    
    # Ресурсы для оператора
    resources:
      requests:
        cpu: "50m"
        memory: "128Mi"
      limits:
        cpu: "200m"
        memory: "256Mi"

