apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-config
  namespace: apps
  annotations:
    reconcile.fluxcd.io/recreate: "true"  
data:
  mysqld.cnf: |
    [mysqld]
    user = mysql
    key_buffer_size = 16M
    myisam-recover-options = BACKUP
    server-id = 2
    skip-log-bin
    binlog_expire_logs_seconds = 60
    max_binlog_size = 100M
    replicate-do-db = BonchBotStaging
    replicate-do-db = BonchBotProduction
    replicate-do-db = shortener
    sql_mode = "STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION"
    innodb_directories="/mnt/hdd/mysql/"
    innodb_flush_log_at_trx_commit = 2
    sync_binlog = 0
