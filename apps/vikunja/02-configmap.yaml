apiVersion: v1
kind: ConfigMap
metadata:
  name: vikunja-config
  namespace: apps
data:
  config.yml: |
    service:
      publicurl: "https://v.progist.ru"
      enableregistration: false
      timezone: "Europe/Moscow"

    cors:
      enable: true
      origins:
        - "https://v.progist.ru"

    mailer:
      enabled: true
      host: "mail.progist.ru"
      port: 587
      authtype: "plain"
      skiptlsverify: false
      fromemail: "vikunja@progist.ru"
      usernameFile: "/secrets/mailer-username"
      passwordFile: "/secrets/mailer-password"

    database:
      type: "mysql"
      user: "vikunja"
      passwordFile: "/secrets/db-password"
      host: "10.0.0.10:3306"
      database: "vikunja"

    auth:
      local:
        enabled: false
      openid:
        enabled: true
        providers:
          - name: "Progist Auth"
            authurl: "https://auth.progist.ru/application/o/vikunja/"
            clientidFile: "/secrets/openid-clientid"
            clientsecretFile: "/secrets/openid-clientsecret"
